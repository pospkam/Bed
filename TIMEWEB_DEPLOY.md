# üöÄ –î–µ–ø–ª–æ–π HABKAM –Ω–∞ Timeweb Cloud

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Next.js –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Ä–æ—Å—Å–∏–π—Å–∫–æ–º VPS —Ö–æ—Å—Ç–∏–Ω–≥–µ Timeweb Cloud.

---

## üìã –ß—Ç–æ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

- [ ] –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ [Timeweb Cloud](https://timeweb.cloud/)
- [ ] –ë–∞–ª–∞–Ω—Å –æ—Ç 300‚ÇΩ/–º–µ—Å (—Ç–∞—Ä–∏—Ñ Cloud 1)
- [ ] Telegram Bot Token (–æ—Ç @BotFather)
- [ ] Chat ID –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –î–æ–º–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ IP)

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≤—Å–µ–≥–æ

```bash
# 1. –°–æ–∑–¥–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä –≤ Timeweb Cloud (Ubuntu 22.04)
# 2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ SSH:
ssh root@–≤–∞—à-ip-–∞–¥—Ä–µ—Å

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É:
curl -fsSL https://raw.githubusercontent.com/pospkam/HabKam/main/scripts/timeweb-install.sh | bash
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç Node.js 18
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç PM2, Nginx, Git
- ‚úÖ –ö–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- ‚úÖ –°–æ–±–µ—Ä—ë—Ç –ø—Ä–æ–µ–∫—Ç
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx
- ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç —Å–∞–π—Ç

**–í—Ä–µ–º—è: 5-10 –º–∏–Ω—É—Ç**

---

## üõ†Ô∏è –ü–û–®–ê–ì–û–í–ê–Ø –£–°–¢–ê–ù–û–í–ö–ê (—Ä—É—á–Ω–∞—è)

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞

**–í –ø–∞–Ω–µ–ª–∏ Timeweb Cloud:**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–°–µ—Ä–≤–µ—Ä—ã** ‚Üí **–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä**

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
   ```
   –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: Ubuntu 22.04 LTS
   
   –¢–∞—Ä–∏—Ñ Cloud 1 (–º–∏–Ω–∏–º—É–º):
   - 1 vCPU
   - 1 GB RAM  
   - 10 GB SSD
   - –¶–µ–Ω–∞: ~300‚ÇΩ/–º–µ—Å
   
   –¢–∞—Ä–∏—Ñ Cloud 2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é):
   - 2 vCPU
   - 2 GB RAM
   - 20 GB SSD
   - –¶–µ–Ω–∞: ~600‚ÇΩ/–º–µ—Å
   
   –†–µ–≥–∏–æ–Ω: –ú–æ—Å–∫–≤–∞ –∏–ª–∏ –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
   ```

3. **–î–æ—Å—Ç—É–ø:**
   - SSH –∫–ª—é—á (–¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á)
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–æ–ª—å (–ø—Ä–∏–¥—ë—Ç –Ω–∞ email)

4. –ù–∞–∂–º–∏—Ç–µ **"–°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä"**

5. –î–æ–∂–¥–∏—Ç–µ—Å—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (2-3 –º–∏–Ω—É—Ç—ã)

---

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH

**–ü–æ–ª—É—á–∏—Ç–µ IP –∞–¥—Ä–µ—Å –≤ –ø–∞–Ω–µ–ª–∏ Timeweb**

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@123.456.78.90

# –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏:
# Are you sure you want to continue connecting? ‚Üí yes

# –í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞:
root@server:~#
```

---

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –û–±–Ω–æ–≤–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
apt update && apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
apt install -y curl wget git build-essential

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Node.js 18 (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π)
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏–∏
node --version    # v18.x.x
npm --version     # 9.x.x

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ PM2 (–º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Node.js)
npm install -g pm2

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Nginx (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
apt install -y nginx

# –í–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Nginx
systemctl enable nginx
systemctl start nginx
```

---

### –®–∞–≥ 4: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤
mkdir -p /var/www
cd /var/www

# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/pospkam/HabKam.git
cd HabKam

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∫–æ–¥ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è
ls -la
# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å: app/, components/, lib/, package.json, etc.
```

---

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env.local —Ñ–∞–π–ª
nano .env.local
```

**–í—Å—Ç–∞–≤—å—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è):**

```env
# Telegram Bot
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789

# Application URL (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π IP –∏–ª–∏ –¥–æ–º–µ–Ω)
NEXT_PUBLIC_SITE_URL=http://123.456.78.90
```

**–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω—ã:**

1. **Bot Token:**
   - Telegram ‚Üí –Ω–∞–π–¥–∏—Ç–µ @BotFather
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ: `/newbot`
   - –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

2. **Chat ID:**
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –û—Ç–∫—Ä–æ–π—Ç–µ: `https://api.telegram.org/bot<YOUR_TOKEN>/getUpdates`
   - –ù–∞–π–¥–∏—Ç–µ `"chat":{"id": NUMBER}`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —á–∏—Å–ª–æ

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** `Ctrl+X` ‚Üí `Y` ‚Üí `Enter`

---

### –®–∞–≥ 6: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install --production

# –°–æ–±–µ—Ä–∏—Ç–µ production build
npm run build

# –≠—Ç–æ –∑–∞–π–º—ë—Ç 1-3 –º–∏–Ω—É—Ç—ã
# –í –∫–æ–Ω—Ü–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# ‚úì Compiled successfully

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–±–æ—Ä–∫–∞ —Å–æ–∑–¥–∞–ª–∞—Å—å
ls -la .next/
```

---

### –®–∞–≥ 7: –ó–∞–ø—É—Å–∫ —Å PM2

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 start npm --name "kamhub" -- start

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
pm2 status

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ id  ‚îÇ name    ‚îÇ mode    ‚îÇ status  ‚îÇ cpu     ‚îÇ memory   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 0   ‚îÇ kamhub  ‚îÇ fork    ‚îÇ online  ‚îÇ 0%      ‚îÇ 50.0mb   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
pm2 startup systemd
pm2 save

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
pm2 logs kamhub --lines 20
```

**PM2 –∫–æ–º–∞–Ω–¥—ã:**
```bash
pm2 status           # –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 restart kamhub   # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 stop kamhub      # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 logs kamhub      # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 monit            # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```

---

### –®–∞–≥ 8: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Å–∞–π—Ç–∞
nano /etc/nginx/sites-available/kamhub
```

**–í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**

```nginx
server {
    listen 80;
    listen [::]:80;
    
    # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π –¥–æ–º–µ–Ω –∏–ª–∏ IP
    server_name kamhub.ru www.kamhub.ru;
    # –ò–ª–∏ –µ—Å–ª–∏ –Ω–µ—Ç –¥–æ–º–µ–Ω–∞:
    # server_name 123.456.78.90;

    # –õ–æ–≥–∏
    access_log /var/log/nginx/kamhub-access.log;
    error_log /var/log/nginx/kamhub-error.log;

    # Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        
        # WebSocket –ø–æ–¥–¥–µ—Ä–∂–∫–∞
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        
        # –ó–∞–≥–æ–ª–æ–≤–∫–∏
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        proxy_cache_bypass $http_upgrade;
        
        # –¢–∞–π–º–∞—É—Ç—ã
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;
    }

    # –°—Ç–∞—Ç–∏–∫–∞ Next.js (–∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
    location /_next/static {
        alias /var/www/HabKam/.next/static;
        expires 365d;
        access_log off;
        add_header Cache-Control "public, immutable";
    }

    # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    location /images {
        alias /var/www/HabKam/public/images;
        expires 30d;
        access_log off;
        add_header Cache-Control "public";
    }

    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;

    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
    client_max_body_size 10M;
}
```

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ:** `Ctrl+X` ‚Üí `Y` ‚Üí `Enter`

**–ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É
ln -s /etc/nginx/sites-available/kamhub /etc/nginx/sites-enabled/

# –£–¥–∞–ª–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
rm /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ –æ—à–∏–±–∫–∏
nginx -t

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
# nginx: configuration file /etc/nginx/nginx.conf test is successful

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx
systemctl reload nginx
```

---

### –®–∞–≥ 9: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ UFW
apt install -y ufw

# –†–∞–∑—Ä–µ—à–∏—Ç–µ SSH (–≤–∞–∂–Ω–æ!)
ufw allow 22/tcp

# –†–∞–∑—Ä–µ—à–∏—Ç–µ HTTP –∏ HTTPS
ufw allow 80/tcp
ufw allow 443/tcp

# –í–∫–ª—é—á–∏—Ç–µ firewall
ufw --force enable

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
ufw status
```

---

### –®–∞–≥ 10: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### –í –ø–∞–Ω–µ–ª–∏ Timeweb Cloud:

1. **DNS** ‚Üí **–î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω**
2. –í–≤–µ–¥–∏—Ç–µ –≤–∞—à –¥–æ–º–µ–Ω: `kamhub.ru`
3. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–ø–∏—Å–∏:

**A-–∑–∞–ø–∏—Å—å (–æ—Å–Ω–æ–≤–Ω–æ–π –¥–æ–º–µ–Ω):**
```
–¢–∏–ø: A
–ò–º—è: @
–ó–Ω–∞—á–µ–Ω–∏–µ: [IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞]
TTL: 3600
```

**CNAME-–∑–∞–ø–∏—Å—å (www):**
```
–¢–∏–ø: CNAME
–ò–º—è: www
–ó–Ω–∞—á–µ–Ω–∏–µ: kamhub.ru
TTL: 3600
```

#### –£ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞:

–ò–∑–º–µ–Ω–∏—Ç–µ NS-—Å–µ—Ä–≤–µ—Ä—ã –Ω–∞:
```
ns1.timeweb.ru
ns2.timeweb.ru
ns3.timeweb.org
ns4.timeweb.org
```

**–û–∂–∏–¥–∞–Ω–∏–µ:** 2-24 —á–∞—Å–∞ (–æ–±—ã—á–Ω–æ 2-4 —á–∞—Å–∞)

---

### –®–∞–≥ 11: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (HTTPS)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Certbot
apt install -y certbot python3-certbot-nginx

# –ü–æ–ª—É—á–∏—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–∑–∞–º–µ–Ω–∏—Ç–µ –¥–æ–º–µ–Ω –Ω–∞ —Å–≤–æ–π)
certbot --nginx -d kamhub.ru -d www.kamhub.ru

# Certbot —Å–ø—Ä–æ—Å–∏—Ç:
# 1. Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π ‚Üí –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–π email
# 2. –°–æ–≥–ª–∞—Å–∏–µ —Å Terms of Service ‚Üí Y
# 3. –ü–æ–ª—É—á–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É ‚Üí N (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
# 4. Redirect HTTP to HTTPS? ‚Üí 2 (Yes, redirect)

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
certbot renew --dry-run

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫—Ä–æ–Ω –¥–ª—è –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏—è
echo "0 12 * * * /usr/bin/certbot renew --quiet" | crontab -
```

**–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ HTTPS!**

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

```bash
# –ü–æ IP
curl http://–≤–∞—à-ip-–∞–¥—Ä–µ—Å

# –ü–æ –¥–æ–º–µ–Ω—É (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
curl http://kamhub.ru
curl https://kamhub.ru
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```
http://–≤–∞—à-ip-–∞–¥—Ä–µ—Å
–∏–ª–∏
https://kamhub.ru
```

### 3. –¢–µ—Å—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **–¢—É—Ä—ã**
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç—É—Ä
3. –ù–∞–∂–º–∏—Ç–µ **–ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ
6. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Telegram** - –¥–æ–ª–∂–Ω–æ –ø—Ä–∏–π—Ç–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!

---

## üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–û–î–ê

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@–≤–∞—à-ip

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /var/www/HabKam

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 stop kamhub

# –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å)
npm install --production

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 restart kamhub

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pm2 logs kamhub --lines 50
```

**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
nano /root/update-kamhub.sh
```

```bash
#!/bin/bash
cd /var/www/HabKam
pm2 stop kamhub
git pull origin main
npm install --production
npm run build
pm2 restart kamhub
echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
```

```bash
# –°–¥–µ–ª–∞–π—Ç–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x /root/update-kamhub.sh

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–∞–∫:
/root/update-kamhub.sh
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### PM2 –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status

# –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
pm2 show kamhub

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
pm2 logs kamhub

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä
pm2 monit

# –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏
pm2 flush
```

### –°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU/RAM
htop

# –ú–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ
df -h

# –ü—Ä–æ—Ü–µ—Å—Å—ã Node.js
ps aux | grep node

# –ü–æ—Ä—Ç—ã
netstat -tulpn | grep :3000
```

### –õ–æ–≥–∏ Nginx

```bash
# –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞
tail -f /var/log/nginx/kamhub-access.log

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
tail -f /var/log/nginx/kamhub-error.log

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
tail -100 /var/log/nginx/kamhub-error.log
```

---

## ‚öôÔ∏è –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø

### –î–æ–±–∞–≤–∏—Ç—å SWAP (–µ—Å–ª–∏ RAM < 2GB)

```bash
# –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –ø–æ–¥–∫–∞—á–∫–∏ 2GB
fallocate -l 2G /swapfile
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile

# –°–¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º
echo '/swapfile none swap sw 0 0' >> /etc/fstab

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
free -h
```

### –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ Nginx

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ /etc/nginx/nginx.conf –≤ –±–ª–æ–∫ http:
nano /etc/nginx/nginx.conf
```

```nginx
# –ö–µ—à –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=nextjs_cache:10m max_size=100m inactive=60m use_temp_path=off;
```

### –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å logrotate
nano /etc/logrotate.d/kamhub
```

```
/var/log/nginx/kamhub-*.log {
    daily
    rotate 14
    compress
    delaycompress
    notifempty
    create 0640 www-data adm
    sharedscripts
    postrotate
        systemctl reload nginx
    endscript
}
```

---

## ‚ùó –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (502 Bad Gateway)

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Next.js –∑–∞–ø—É—â–µ–Ω
pm2 status

# –ï—Å–ª–∏ offline - –∑–∞–ø—É—Å—Ç–∏—Ç–µ
pm2 restart kamhub

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
pm2 logs kamhub --lines 100

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 3000
netstat -tulpn | grep :3000

# –õ–æ–≥–∏ Nginx
tail -50 /var/log/nginx/kamhub-error.log
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–µ—Ç / –∫—Ä–∞—à–∏—Ç—Å—è

```bash
# –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç –ø–∞–º—è—Ç–∏
pm2 delete kamhub
pm2 start npm --name "kamhub" --max-memory-restart 500M -- start

# –î–æ–±–∞–≤—å—Ç–µ SWAP (—Å–º. —Ä–∞–∑–¥–µ–ª –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
pm2 logs kamhub --err
```

### –ú–µ–¥–ª–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã
htop

# CPU > 90% ‚Üí –æ–±–Ω–æ–≤–∏—Ç–µ —Ç–∞—Ä–∏—Ñ
# RAM > 90% ‚Üí –¥–æ–±–∞–≤—å—Ç–µ SWAP –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ —Ç–∞—Ä–∏—Ñ

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ I/O –¥–∏—Å–∫–∞
iostat -x 1
```

### Telegram –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cat /var/www/HabKam/.env.local

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –≤—Ä—É—á–Ω—É—é
curl "https://api.telegram.org/bot<YOUR_TOKEN>/getMe"

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ—Ç–µ

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs kamhub | grep telegram
```

### –î–æ–º–µ–Ω –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS
nslookup kamhub.ru

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥ Nginx
nginx -t

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑–∞–Ω –≤ server_name
grep server_name /etc/nginx/sites-available/kamhub
```

---

## üí∞ –°–¢–û–ò–ú–û–°–¢–¨

**Timeweb Cloud —Ç–∞—Ä–∏—Ñ—ã:**

| –¢–∞—Ä–∏—Ñ | vCPU | RAM | SSD | –¶–µ–Ω–∞/–º–µ—Å |
|-------|------|-----|-----|----------|
| Cloud 1 | 1 | 1 GB | 10 GB | ~300‚ÇΩ |
| Cloud 2 | 2 | 2 GB | 20 GB | ~600‚ÇΩ |
| Cloud 3 | 3 | 4 GB | 40 GB | ~1200‚ÇΩ |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: Cloud 1
- –ü—Ä–æ–¥–∞–∫—à–Ω: Cloud 2 –∏–ª–∏ –≤—ã—à–µ

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- –î–æ–º–µ–Ω: –æ—Ç 150‚ÇΩ/–≥–æ–¥
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: –±–µ—Å–ø–ª–∞—Ç–Ω–æ (Let's Encrypt)
- –ë—ç–∫–∞–ø—ã: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

## üìö –ü–û–õ–ï–ó–ù–´–ï –°–°–´–õ–ö–ò

- üìò [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Timeweb Cloud](https://timeweb.cloud/help)
- üìó [Next.js Deployment](https://nextjs.org/docs/deployment)
- üìï [PM2 Documentation](https://pm2.keymetrics.io/)
- üìô [Nginx Configuration](https://nginx.org/ru/docs/)

---

## üéØ –ß–ï–ö–õ–ò–°–¢

- [ ] –°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–Ω –≤ Timeweb Cloud
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Node.js 18+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] PM2 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ö–æ–¥ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –≤ /var/www/HabKam
- [ ] .env.local —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
- [ ] npm run build –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ
- [ ] PM2 –∑–∞–ø—É—â–µ–Ω (pm2 status ‚Üí online)
- [ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –°–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ IP
- [ ] –î–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] SSL –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –¢–µ—Å—Ç –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—à—ë–ª —É—Å–ø–µ—à–Ω–æ
- [ ] Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ

---

## üöÄ –ì–û–¢–û–í–û!

**–í–∞—à —Å–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Timeweb Cloud!**

**URL:** `http://–≤–∞—à-ip` –∏–ª–∏ `https://–≤–∞—à-–¥–æ–º–µ–Ω.ru`

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞:**
- üìß Email: info@kamhub.ru
- üí¨ Telegram: @kamchatka_real
- üêõ Issues: https://github.com/pospkam/HabKam/issues

**–£—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞! üé£üèîÔ∏è**
